<!-- templates/accounts/verify_otp.html -->
{% extends 'base.html' %}
{% block title %}Vérification OTP{% endblock %}
{% block content %}
<div>
    <div>
        <div>
            <i></i>
        </div>
        <h1>Vérification de compte</h1>
        {% if user %}
            <p>
                Un code OTP a été envoyé à <strong>{{ user.email }}</strong>.
            </p>
        {% else %}
            <p>Un code OTP vous a été envoyé par e-mail.</p>
        {% endif %}
    </div>

    <form method="post">
        {% csrf_token %}
        <div>
            <label for="otp">Code OTP (6 chiffres)</label>
            <input
                type="text"
                id="otp"
                name="otp"
                maxlength="6"
                required
                placeholder="••••••"
            >
            <p>Valable 2 minutes.</p>
        </div>

        <button type="submit">
            <i></i> Activer le compte
        </button>
    </form>

    {% if user_id %}
    <form method="post" action="{% url 'resend_otp' %}" style="margin-top: 1.5rem;">
        {% csrf_token %}
        <input type="hidden" name="user_id" value="{{ user_id }}">
        <button 
            type="submit" 
        >
            Renvoyer un nouveau code
        </button>
    </form>
    {% endif %}

    {% if messages %}
        <div>
            {% for message in messages %}
                <p>{{ message }}</p>
            {% endfor %}
        </div>
    {% endif %}
</div>

<style>
    .letter-spacing-2 {
        letter-spacing: 10px;
    }
</style>
{% endblock %}